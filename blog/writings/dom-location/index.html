<!doctype html><html data-n-head="lang" data-n-head-ssr lang="zh"><meta data-n-head="true" content="IE=edge,chrome=1" http-equiv='"X-UA-Compatible'><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport"><meta data-n-head="true" content="bowen blog, bowen 博客, vuejs, reactjs, ssr, 前端开发, 前端 , web开发, nodejs, github" name="keywords"><meta data-n-head="true" content="一个分享代码经历的地方" name="description" data-hid="description"><meta data-n-head="true" content="yes" name="apple-mobile-web-app-capable"><meta data-n-head="true" content="black" name="apple-mobile-web-app-status-bar-style"><meta data-n-head="true" content="yes" name="mobile-web-app-capable" data-hid="mobile-web-app-capable"><meta data-n-head="true" content="Bowen Blog" name="apple-mobile-web-app-title" data-hid="apple-mobile-web-app-title"><meta data-n-head="true" content="Bowen" name="author" data-hid="author"><meta data-n-head="true" content="#24292e" name="theme-color" data-hid="theme-color"><meta data-n-head="true" content="website" name="og:type" data-hid="og:type" property="og:type"><meta data-n-head="true" content="Bowen Blog" name="og:title" data-hid="og:title" property="og:title"><meta data-n-head="true" content="A place which is used to share programming experiences" name="og:description" data-hid="og:description" property="og:description"><title data-n-head="true">获取 Element 在 document 中的位置信息 | Bowen Blog</title><link href="/favicon.ico" rel="icon" data-n-head="true" type="image/x-icon"><link href="/_nuxt/manifest.2108b1d4.json" rel="manifest" data-n-head="true"><link href="/_nuxt/icons/icon_64.e20A200w20w.png" rel="shortcut icon" data-n-head="true"><link href="/_nuxt/icons/icon_512.e20A200w20w.png" rel="apple-touch-icon" data-n-head="true" sizes="512x512"><link href="https://set.sh/blog/writings/dom-location/" rel="alternate" data-n-head="true" hreflang="zh"><link href="/_nuxt/manifest.e871ed9ec943b3b0a9ad.js" rel="preload" as="script"><link href="/_nuxt/vendor.13de21511613edf061b2.js" rel="preload" as="script"><link href="/_nuxt/app.5a4fa6b8fcf73db97515.js" rel="preload" as="script"><link href="/_nuxt/app.7d838d8b0da655541c316320c8ad8e6f.css" rel="preload" as="style"><link href="/_nuxt/layouts/blog.6efcc6c813d476fa30a1.js" rel="preload" as="script"><link href="/_nuxt/pages/blog.48d3a2ec874d58a119ed.js" rel="preload" as="script"><link href="/_nuxt/pages/blog/writings/_id/index.7e8ea086028ccb843111.js" rel="preload" as="script"><link href="/_nuxt/pages/blog/tags/_id/index.edb9dbabb1b9c2ef81f2.js" rel="prefetch"><link href="/_nuxt/pages/index.1d0ac68e309be0e86168.js" rel="prefetch"><link href="/_nuxt/pages/blog/tags/index.2659d358b69abdfd34bf.js" rel="prefetch"><link href="/_nuxt/pages/blog/projects/index.3ff8e031c3cb4f25eaed.js" rel="prefetch"><link href="/_nuxt/pages/blog/writings/index.b016af22016e152b7231.js" rel="prefetch"><link href="/_nuxt/layouts/home.dd55e95df1c2109ebde6.js" rel="prefetch"><link href="/_nuxt/layouts/default.89ffa224d3d7769e4fbb.js" rel="prefetch"><link href="/_nuxt/app.7d838d8b0da655541c316320c8ad8e6f.css" rel="stylesheet"><body data-n-head=""><div id="__nuxt" data-server-rendered="true"><div class="nuxt-progress" style="width:0%;height:2px;background-color:#3eaf7c;opacity:0"></div><div id="__layout"><section class="blog sf__parent__clearfix" data-v-cac63c14><header class="header __position components-animation" data-v-13c46026 data-v-cac63c14><nav class="mobile-navigator" data-v-13c46026 data-v-d4cae7a6><label class="label-line" data-v-d4cae7a6><span class="__position label-line line-top" data-v-d4cae7a6><span class="__position line-crust line-crust-top" data-v-d4cae7a6></span></span><span class="__position label-line line-bottom" data-v-d4cae7a6><span class="__position line-crust line-crust-bottom" data-v-d4cae7a6></span></span></label></nav><nav class="navigator __position grid" data-v-13c46026 role="navigation"><a href="/" class="navigator-link hover-animation grid-cell" data-v-13c46026>HOME</a><a href="/blog/writings/" class="navigator-link hover-animation grid-cell" data-v-13c46026>WRITINGS</a><a href="/blog/projects/" class="navigator-link hover-animation grid-cell" data-v-13c46026>PROJECTS</a><a href="/blog/tags/" class="navigator-link hover-animation grid-cell" data-v-13c46026>TAGS</a><a href="https://github.com/lbwa" rel="noopener" target="_blank" class="navigator-link hover-animation grid-cell" data-v-13c46026>GITHUB</a></nav><div class="background-helper __position" data-v-13c46026></div></header><main class="articles-container wrapper sf__reference__layout" data-v-cac63c14 role="main"><article class="articles-main"><div class="article-header"><h1 class="article-title">获取 Element 在 document 中的位置信息</h1><span class="article-author">Bowen</span><span class="article-date">2018 SEP 01</span><div class="article-tags"><a href="/blog/tags/前端开发" class="article-tag">前端开发</a><a href="/blog/tags/css" class="article-tag">CSS</a></div></div><div class="article-content"><h2 id="实现方法"><a href="#实现方法" class="header-anchor" aria-hidden="true">#</a> 实现方法</h2><p>以下主要参考 <a href="https://www.w3.org/TR/cssom-view-1/" rel="noopener noreferrer" target="_blank">w3c cssom view module 1<outboundlink></a>与 <code>MDN web docs</code>。<h3 id="scrolltop-相对于可视区域"><a href="#scrolltop-相对于可视区域" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop" rel="noopener noreferrer" target="_blank">scrollTop<outboundlink></a>- 相对于可视区域</h3><p>展示一个元素垂直滚动距离的像素值。一个元素的 <code>scrollTop</code> 的值来源于该元素的 <code>top</code> 顶端到最顶级的 <em><strong>可见</strong></em> 内容区域的距离。当一个元素的内容区域 <code>content</code> 未生成垂直滚动条时，那么该元素的 <code>scrollTop</code> 的值恒为 0。<p>赋值可改变当前滚动条位置。<pre class="language-js" v-pre><code><span class="token comment">// 在当前页面生成滚动条时，即根元素的 `content` 区域生成垂直滚动条时，scrollTop 将变化</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token comment">// 将展示当前页面滚动条的移动位置</span>

<span class="token comment">// 由于历史原因存在以下兼容性解决方案</span>
<span class="token keyword">const</span> nowLocation <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop
  <span class="token operator">||</span> window<span class="token punctuation">.</span>pageYOffset <span class="token comment">// window.scrollY 的别名</span>
  <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop
</code></pre><h3 id="offsettop-相对于最近的定位元素"><a href="#offsettop-相对于最近的定位元素" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop" rel="noopener noreferrer" target="_blank">offsetTop<outboundlink></a>- 相对于最近的定位元素</h3><p>只读属性。展示当前元素相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" rel="noopener noreferrer" target="_blank">offsetParent<outboundlink></a>节点顶端 <code>top</code> 的距离。<p><code>offsetParent</code> 表示相对于当前元素的最近的定位（<code>position</code> 为非默认值的包含块元素）包含元素 <code>positioned containing element</code>。如带有属性 <code>position: relative</code> 的包含块元素 <code>containing block</code><h3 id="scrollleft-相对于可视区域"><a href="#scrollleft-相对于可视区域" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft" rel="noopener noreferrer" target="_blank">scrollLeft<outboundlink></a>- 相对于可视区域</h3><p>（<a href="https://www.w3.org/TR/cssom-view-1/#dom-element-scrollleft" rel="noopener noreferrer" target="_blank">w3c scrollLeft 取值<outboundlink></a>）<p>展示当前元素相对于最顶级可见内容区域的左边缘距离。<h3 id="offsetleft-相对于最近的定位元素"><a href="#offsetleft-相对于最近的定位元素" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetLeft" rel="noopener noreferrer" target="_blank">offsetLeft<outboundlink></a>- 相对于最近的定位元素</h3><p>（<a href="https://www.w3.org/TR/cssom-view-1/#dom-htmlelement-offsetleft" rel="noopener noreferrer" target="_blank">w3c offsetLeft 取值<outboundlink></a>）<p>只读属性。表示当前元素的 <em><strong>左上角顶点</strong></em> 相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" rel="noopener noreferrer" target="_blank">offsetParent<outboundlink></a>节点左侧偏移 <code>offset</code> 的像素。<h3 id="scrollheight-相对于可视区域"><a href="#scrollheight-相对于可视区域" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" rel="noopener noreferrer" target="_blank">scrollHeight<outboundlink></a>- 相对于可视区域</h3><p>只读属性。描述了一个元素的内容区域的测量高度值。被测量的内容区域 <em><strong>包含</strong></em> 因为溢出屏幕而不可见的内容区域。<p><code>scrollHeight</code> 等于在没有垂直滚动条时，元素在 <code>viewport</code> 内为了适应所有内容所需的最小高度。该高度以同样的方式被 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" rel="noopener noreferrer" target="_blank">clientHeight<outboundlink></a>测量：它包含了元素的 <code>padding</code> ，但不包含 <code>border</code>，<code>margin</code> 或者水平滚动条（如果存在的话）。它同样包含了伪元素的高度，如 <code>::before</code> 或 <code>::after</code>。 如果元素的内容区域可以被自动适应的情况下，且没有出现垂直滚动条时，<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" rel="noopener noreferrer" target="_blank">scrollHeight<outboundlink></a>将等于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" rel="noopener noreferrer" target="_blank">clientHeight<outboundlink></a>。<blockquote><p>This property will round the value to an integer. If you need a fractional value, use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="noopener noreferrer" target="_blank">Element.getBoundingClientRect()<outboundlink></a>.</blockquote><p><em><strong>注：</strong></em> 该参数始终返回一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round" rel="noopener noreferrer" target="_blank">Math.round<outboundlink></a>四舍五入取整的整数。如果需要小数位的值，可使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="noopener noreferrer" target="_blank">Element.getBoundingClientRect()<outboundlink></a>。<h3 id="scrollwidth-相对于可视区域"><a href="#scrollwidth-相对于可视区域" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth" rel="noopener noreferrer" target="_blank">scrollWidth<outboundlink></a>- 相对于可视区域</h3><p>只读属性。描述了当前元素的内容 <code>content box</code> 区域的宽度，其中包含因溢出屏幕不可见的内容区域。<p>与 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" rel="noopener noreferrer" target="_blank">scrollHeight<outboundlink></a>相似，在不存在水平滚动条时，当前元素的 <code>scrollWidth</code> 等于 <code>clientWidth</code>。<h3 id="clientheight"><a href="#clientheight" class="header-anchor" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" rel="noopener noreferrer" target="_blank">clientHeight<outboundlink></a></h3><p>只读属性。在没有 <a href="https://www.w3.org/TR/cssom-view-1/#css-layout-box" rel="noopener noreferrer" target="_blank">CSS layout boxes<outboundlink></a>或 <code>inline layout boxes</code> 的情况下，对于元素来说，该值为 0 。否则，等于元素的 <code>inner height</code> 的像素值。其中包含 <code>padding</code> 但不包含 <code>border</code>、<code>margin</code> 或 水平滚动条。<p><code>clientHeight</code> 可通过 <code>height + padding - 水平滚动条（若有）</code> 来计算。<blockquote><p>This property will round the value to an integer. If you need a fractional value, use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="noopener noreferrer" target="_blank">Element.getBoundingClientRect()<outboundlink></a>.</blockquote><p><em><strong>注：</strong></em> 该参数始终返回一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round" rel="noopener noreferrer" target="_blank">Math.round<outboundlink></a>四舍五入取整的整数。如果需要小数位的值，可使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="noopener noreferrer" target="_blank">Element.getBoundingClientRect()<outboundlink></a>。<h2 id="块级元素"><a href="#块级元素" class="header-anchor" aria-hidden="true">#</a> 块级元素</h2><p>对于块级元素来说，<code>offsetTop</code>，<code>offsetLeft</code>，<code>offsetWidth</code>，<code>offsetHeight</code> 描述了一个元素的 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" rel="noopener noreferrer" target="_blank">border box<outboundlink></a>（即盒模型中边框形成的区域）相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" rel="noopener noreferrer" target="_blank">offsetParent<outboundlink></a>的偏移量。<h2 id="行内元素"><a href="#行内元素" class="header-anchor" aria-hidden="true">#</a> 行内元素</h2><p>对于存在换行 （<code>wrap</code>） 的行内元素来说。<code>offsetTop</code> 和 <code>offsetLeft</code> 描述了第一个 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" rel="noopener noreferrer" target="_blank">border box<outboundlink></a>的位置 <code>positions</code>（通过 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects" rel="noopener noreferrer" target="_blank">Element.getClientRects()<outboundlink></a>获得该 <code>box</code> 的 <code>width</code> 和 <code>height</code>），而 <code>offsetWidth</code> 和 <code>offsetHeight</code> 描述的是 <code>bounding border box</code> （由 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" rel="noopener noreferrer" target="_blank">Element.getBoundingClientRect()<outboundlink></a>获取该 <code>box</code> 尺寸）的尺寸。<p>因此，一个行内元素盒模型的 <code>offsetTop</code>，<code>offsetLeft</code>，<code>offsetWidth</code>，<code>offsetHeight</code> 的 <code>left</code>、<code>top</code>、<code>width</code>、<code>height</code> <em><strong>不会是</strong></em> 一个包含换行文本的 <code>bounding box</code>。<h2 id="抽象总结"><a href="#抽象总结" class="header-anchor" aria-hidden="true">#</a> 抽象总结</h2><p>一般来说，<code>scroll~</code> 系属性趋向于描述当前元素相对于当前视口区域的状态。<code>offset~</code> 系属性趋向于描述当前元素相对于最近的祖先定位包含块的状态。<code>client~</code> 系属性趋向于描述当前元素的 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" rel="noopener noreferrer" target="_blank">padding box<outboundlink></a>区域的测量值，若对应方向上，存在对应滚动条时，还需要加上对应滚动条的值。</div></article><button data-v-e85d20b2 data-v-e85d20b2 class="floating-btn __position" style="display:none"><svg class="icon-rocket" data-v-e85d20b2 viewBox="0 0 512 512"><path d="M256 421.6c-18.1 0-33.2-6.8-42.9-10.9-5.4-2.3-11.3 1.8-10.9 7.6l3.5 51c.2 3.1 3.8 4.7 6.3 2.8l14.5-11c1.8-1.4 4.5-.9 5.7 1l20.5 32.1c1.5 2.4 5.1 2.4 6.6 0l20.5-32.1c1.2-1.9 3.9-2.4 5.7-1l14.5 11c2.5 1.9 6.1.3 6.3-2.8l3.5-51c.4-5.8-5.5-10-10.9-7.6-9.8 4.1-24.8 10.9-42.9 10.9z" data-v-e85d20b2></path><path d="M397.7 293.1l-48-49.1c0-158-93.2-228-93.2-228s-94.1 70-94.1 228l-48 49.1c-1.8 1.8-2.6 4.5-2.2 7.1L130.6 412c.9 5.7 7.1 8.5 11.8 5.4l67.1-45.4s20.7 20 47.1 20c26.4 0 46.1-20 46.1-20l67.1 45.4c4.6 3.1 10.8.3 11.8-5.4l18.5-111.9c.2-2.6-.6-5.2-2.4-7zM256.5 192c-17 0-30.7-14.3-30.7-32s13.8-32 30.7-32c17 0 30.7 14.3 30.7 32s-13.7 32-30.7 32z" data-v-e85d20b2></path></svg></button></main><footer class="blog-footer sf__main__layout grid col grid-jc-center" data-v-1044ad0a data-v-cac63c14><div class="footer-info" data-v-1044ad0a>Copyright © 2018 <a href="https://github.com/lbwa" rel="noopener" target="_blank" class="author" data-v-1044ad0a>Bowen</a></div></footer><section class="loading-wrapper grid col grid-center grid-jc-center" data-v-cac63c14 style="display:none"><div class="loading"><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div></div><a class="loading-tips">Loading</a></section></section></div></div><script type="text/javascript">window.__NUXT__={layout:"blog",data:[{menu:[{errno:0,to:"writings/dom-location",title:"获取 Element 在 document 中的位置信息",author:"Bowen",date:"2018 SEP 01",tags:["前端开发","CSS"]},{errno:0,to:"writings/spa-and-mpa",title:"SPA 与 MPA 的比较与优化",author:"Bowen",date:"2018 AUG 04",tags:["前端开发","SPA","MPA","skeleton"]},{errno:0,to:"writings/async-function-in-js",title:"Event loops 中的 AsyncFunction",author:"Bowen",date:"2018 JUL 26",tags:["JavaScript","async","事件循环"]},{errno:0,to:"writings/pwa-fundamentals",title:"PWA 基础",author:"Bowen",date:"2018 JUL 07",tags:["前端开发","PWA"]},{errno:0,to:"writings/js-design-pattern",title:"JS 设计模式",author:"Bowen",date:"2018 JUN 12",tags:["前端开发","设计模式"]},{errno:0,to:"writings/http-request",title:"HTTP 协议请求首部",author:"Bowen",date:"2018 JUN 08",tags:["前端开发","网络请求"]},{errno:0,to:"writings/http-response",title:"HTTP 协议响应首部",author:"Bowen",date:"2018 JUN 07",tags:["前端开发","网络请求"]},{errno:0,to:"writings/http-protocol",title:"HTTP 协议",author:"Bowen",date:"2018 JUN 06",tags:["前端开发","网络请求"]},{errno:0,to:"writings/execution-context",title:"JS 执行上下文",author:"Bowen",date:"2018 MAY 07",tags:["前端开发","JavaScript","执行上下文"]},{errno:0,to:"writings/vue-lifecycle-and-slots",title:"对 Vue 插槽和生命周期的一点思考",author:"Bowen",date:"2018 APR 24",tags:["前端开发","Vue.js"]},{errno:0,to:"writings/learning-vue-unit-test",title:"总结如何进行单元测试",author:"Bowen",date:"2018 APR 21",tags:["前端开发","Vue.js","应用测试"]},{errno:0,to:"writings/cross-domain-solution",title:"客户端跨域解决方案",author:"Bowen",date:"2018 APR 19",tags:["前端开发","网络请求"]},{errno:0,to:"writings/css-bfc",title:"探究 BFC 以及闭合浮动原理",author:"Bowen",date:"2018 MAR 29",tags:["前端开发","CSS"]},{errno:0,to:"writings/vue.js-reusability-and-composition",title:"学习 Vue.js 可复用性和组合",author:"Bowen",date:"2018 MAR 12",tags:["前端开发","JavaScript","Vue.js"]},{errno:0,to:"writings/event-loop",title:"解析 event loops",author:"Bowen",date:"2018 MAR 08",tags:["前端开发","JavaScript","事件循环"]},{errno:0,to:"writings/learning-vuex",title:"学习 vuex 基础",author:"Bowen",date:"2018 MAR 06",tags:["前端开发","Vue.js"]},{errno:0,to:"writings/compare-commonjs-with-esm",title:"比较 CommonJS 与 ES6 Module 语法",author:"Bowen",date:"2018 FEB 27",tags:["前端开发","JavaScript","模块"]},{errno:0,to:"writings/learning-vuejs-essentials",title:"学习 Vue.js 基础",author:"Bowen",date:"2018 FEB 24",tags:["前端开发","JavaScript","Vue.js"]},{errno:0,to:"writings/keyword-this",title:"理解 this 的指向",author:"Bowen",date:"2018 FEB 06",tags:["前端开发","JavaScript"]}]},{title:"获取 Element 在 document 中的位置信息",date:"2018 SEP 01",author:"Bowen",tags:["前端开发","CSS"],content:'<h2 id="实现方法"><a class="header-anchor" href="#实现方法" aria-hidden="true">#</a> 实现方法</h2>\n<p>以下主要参考 <a href="https://www.w3.org/TR/cssom-view-1/" target="_blank" rel="noopener noreferrer">w3c cssom view module 1<OutboundLink/></a> 与 <code>MDN web docs</code>。</p>\n<h3 id="scrolltop-相对于可视区域"><a class="header-anchor" href="#scrolltop-相对于可视区域" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop" target="_blank" rel="noopener noreferrer">scrollTop<OutboundLink/></a> - 相对于可视区域</h3>\n<p>展示一个元素垂直滚动距离的像素值。一个元素的 <code>scrollTop</code> 的值来源于该元素的 <code>top</code> 顶端到最顶级的 <em><strong>可见</strong></em> 内容区域的距离。当一个元素的内容区域 <code>content</code> 未生成垂直滚动条时，那么该元素的 <code>scrollTop</code> 的值恒为 0。</p>\n<p>赋值可改变当前滚动条位置。</p>\n<pre v-pre class="language-js"><code><span class="token comment">// 在当前页面生成滚动条时，即根元素的 `content` 区域生成垂直滚动条时，scrollTop 将变化</span>\ndocument<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token comment">// 将展示当前页面滚动条的移动位置</span>\n\n<span class="token comment">// 由于历史原因存在以下兼容性解决方案</span>\n<span class="token keyword">const</span> nowLocation <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop\n  <span class="token operator">||</span> window<span class="token punctuation">.</span>pageYOffset <span class="token comment">// window.scrollY 的别名</span>\n  <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop\n</code></pre>\n<h3 id="offsettop-相对于最近的定位元素"><a class="header-anchor" href="#offsettop-相对于最近的定位元素" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop" target="_blank" rel="noopener noreferrer">offsetTop<OutboundLink/></a> - 相对于最近的定位元素</h3>\n<p>只读属性。展示当前元素相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" target="_blank" rel="noopener noreferrer">offsetParent<OutboundLink/></a> 节点顶端 <code>top</code> 的距离。</p>\n<p><code>offsetParent</code> 表示相对于当前元素的最近的定位（<code>position</code> 为非默认值的包含块元素）包含元素 <code>positioned containing element</code>。如带有属性 <code>position: relative</code> 的包含块元素 <code>containing block</code></p>\n<h3 id="scrollleft-相对于可视区域"><a class="header-anchor" href="#scrollleft-相对于可视区域" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft" target="_blank" rel="noopener noreferrer">scrollLeft<OutboundLink/></a> - 相对于可视区域</h3>\n<p>（<a href="https://www.w3.org/TR/cssom-view-1/#dom-element-scrollleft" target="_blank" rel="noopener noreferrer">w3c scrollLeft 取值<OutboundLink/></a>）</p>\n<p>展示当前元素相对于最顶级可见内容区域的左边缘距离。</p>\n<h3 id="offsetleft-相对于最近的定位元素"><a class="header-anchor" href="#offsetleft-相对于最近的定位元素" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetLeft" target="_blank" rel="noopener noreferrer">offsetLeft<OutboundLink/></a> - 相对于最近的定位元素</h3>\n<p>（<a href="https://www.w3.org/TR/cssom-view-1/#dom-htmlelement-offsetleft" target="_blank" rel="noopener noreferrer">w3c offsetLeft 取值<OutboundLink/></a>）</p>\n<p>只读属性。表示当前元素的 <em><strong>左上角顶点</strong></em> 相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" target="_blank" rel="noopener noreferrer">offsetParent<OutboundLink/></a> 节点左侧偏移 <code>offset</code> 的像素。</p>\n<h3 id="scrollheight-相对于可视区域"><a class="header-anchor" href="#scrollheight-相对于可视区域" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" target="_blank" rel="noopener noreferrer">scrollHeight<OutboundLink/></a> - 相对于可视区域</h3>\n<p>只读属性。描述了一个元素的内容区域的测量高度值。被测量的内容区域 <em><strong>包含</strong></em> 因为溢出屏幕而不可见的内容区域。</p>\n<p><code>scrollHeight</code> 等于在没有垂直滚动条时，元素在 <code>viewport</code> 内为了适应所有内容所需的最小高度。该高度以同样的方式被 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" target="_blank" rel="noopener noreferrer">clientHeight<OutboundLink/></a> 测量：它包含了元素的 <code>padding</code> ，但不包含 <code>border</code>，<code>margin</code> 或者水平滚动条（如果存在的话）。它同样包含了伪元素的高度，如 <code>::before</code> 或 <code>::after</code>。 如果元素的内容区域可以被自动适应的情况下，且没有出现垂直滚动条时，<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" target="_blank" rel="noopener noreferrer">scrollHeight<OutboundLink/></a> 将等于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" target="_blank" rel="noopener noreferrer">clientHeight<OutboundLink/></a>。</p>\n<blockquote>\n<p>This property will round the value to an integer. If you need a fractional value, use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()<OutboundLink/></a>.</p>\n</blockquote>\n<p><em><strong>注：</strong></em> 该参数始终返回一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round" target="_blank" rel="noopener noreferrer">Math.round<OutboundLink/></a> 四舍五入取整的整数。如果需要小数位的值，可使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()<OutboundLink/></a>。</p>\n<h3 id="scrollwidth-相对于可视区域"><a class="header-anchor" href="#scrollwidth-相对于可视区域" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth" target="_blank" rel="noopener noreferrer">scrollWidth<OutboundLink/></a> - 相对于可视区域</h3>\n<p>只读属性。描述了当前元素的内容 <code>content box</code> 区域的宽度，其中包含因溢出屏幕不可见的内容区域。</p>\n<p>与 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight" target="_blank" rel="noopener noreferrer">scrollHeight<OutboundLink/></a> 相似，在不存在水平滚动条时，当前元素的 <code>scrollWidth</code> 等于 <code>clientWidth</code>。</p>\n<h3 id="clientheight"><a class="header-anchor" href="#clientheight" aria-hidden="true">#</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" target="_blank" rel="noopener noreferrer">clientHeight<OutboundLink/></a></h3>\n<p>只读属性。在没有 <a href="https://www.w3.org/TR/cssom-view-1/#css-layout-box" target="_blank" rel="noopener noreferrer">CSS layout boxes<OutboundLink/></a> 或 <code>inline layout boxes</code> 的情况下，对于元素来说，该值为 0 。否则，等于元素的 <code>inner height</code> 的像素值。其中包含 <code>padding</code> 但不包含 <code>border</code>、<code>margin</code> 或 水平滚动条。</p>\n<p><code>clientHeight</code> 可通过 <code>height + padding - 水平滚动条（若有）</code> 来计算。</p>\n<blockquote>\n<p>This property will round the value to an integer. If you need a fractional value, use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()<OutboundLink/></a>.</p>\n</blockquote>\n<p><em><strong>注：</strong></em> 该参数始终返回一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round" target="_blank" rel="noopener noreferrer">Math.round<OutboundLink/></a> 四舍五入取整的整数。如果需要小数位的值，可使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()<OutboundLink/></a>。</p>\n<h2 id="块级元素"><a class="header-anchor" href="#块级元素" aria-hidden="true">#</a> 块级元素</h2>\n<p>对于块级元素来说，<code>offsetTop</code>，<code>offsetLeft</code>，<code>offsetWidth</code>，<code>offsetHeight</code> 描述了一个元素的 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" target="_blank" rel="noopener noreferrer">border box<OutboundLink/></a>（即盒模型中边框形成的区域）相对于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLelement/offsetParent" target="_blank" rel="noopener noreferrer">offsetParent<OutboundLink/></a> 的偏移量。</p>\n<h2 id="行内元素"><a class="header-anchor" href="#行内元素" aria-hidden="true">#</a> 行内元素</h2>\n<p>对于存在换行 （<code>wrap</code>） 的行内元素来说。<code>offsetTop</code> 和 <code>offsetLeft</code> 描述了第一个 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" target="_blank" rel="noopener noreferrer">border box<OutboundLink/></a> 的位置 <code>positions</code>（通过 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects" target="_blank" rel="noopener noreferrer">Element.getClientRects()<OutboundLink/></a> 获得该 <code>box</code> 的 <code>width</code> 和 <code>height</code>），而 <code>offsetWidth</code> 和 <code>offsetHeight</code> 描述的是 <code>bounding border box</code> （由 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()<OutboundLink/></a> 获取该 <code>box</code> 尺寸）的尺寸。</p>\n<p>因此，一个行内元素盒模型的 <code>offsetTop</code>，<code>offsetLeft</code>，<code>offsetWidth</code>，<code>offsetHeight</code> 的 <code>left</code>、<code>top</code>、<code>width</code>、<code>height</code> <em><strong>不会是</strong></em> 一个包含换行文本的 <code>bounding box</code>。</p>\n<h2 id="抽象总结"><a class="header-anchor" href="#抽象总结" aria-hidden="true">#</a> 抽象总结</h2>\n<p>一般来说，<code>scroll~</code> 系属性趋向于描述当前元素相对于当前视口区域的状态。<code>offset~</code> 系属性趋向于描述当前元素相对于最近的祖先定位包含块的状态。<code>client~</code> 系属性趋向于描述当前元素的 <a href="https://www.w3.org/TR/CSS22/box.html#box-dimensions" target="_blank" rel="noopener noreferrer">padding box<OutboundLink/></a> 区域的测量值，若对应方向上，存在对应滚动条时，还需要加上对应滚动条的值。</p>\n'}],error:null,serverRendered:!0}</script><script defer src="/_nuxt/manifest.e871ed9ec943b3b0a9ad.js"></script><script defer src="/_nuxt/layouts/blog.6efcc6c813d476fa30a1.js"></script><script defer src="/_nuxt/pages/blog.48d3a2ec874d58a119ed.js"></script><script defer src="/_nuxt/pages/blog/writings/_id/index.7e8ea086028ccb843111.js"></script><script defer src="/_nuxt/vendor.13de21511613edf061b2.js"></script><script defer src="/_nuxt/app.5a4fa6b8fcf73db97515.js"></script>